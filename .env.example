# OpenVox WebUI Environment Configuration
# Copy this file to .env and adjust values as needed

# Backend Server Configuration
OPENVOX_HOST=127.0.0.1
OPENVOX_PORT=5051

# Frontend Static Files (served by the Rust backend)
# Set to 'true' to serve the frontend from the Rust server (production mode)
# Set to 'false' to use Vite dev server separately (development mode)
OPENVOX_SERVE_FRONTEND=false
# Path to the built frontend files (only used when OPENVOX_SERVE_FRONTEND=true)
OPENVOX_STATIC_DIR=frontend/dist

# TLS/HTTPS Configuration (uncomment to enable HTTPS)
# OPENVOX_TLS_CERT=/etc/openvox-webui/ssl/server.crt
# OPENVOX_TLS_KEY=/etc/openvox-webui/ssl/server.key
# OPENVOX_TLS_MIN_VERSION=1.2

# Frontend Development Server (Vite) - only used when OPENVOX_SERVE_FRONTEND=false
VITE_PORT=5050
VITE_HOST=localhost
VITE_BACKEND_HOST=localhost
VITE_BACKEND_PORT=5051

# Database
DATABASE_URL=sqlite://./data/ovwu.db

# Logging Configuration
RUST_LOG=openvox_webui=debug,tower_http=debug
# Log output target: console, file, or both
OPENVOX_LOG_TARGET=console
# Log format: pretty, json, or compact
OPENVOX_LOG_FORMAT=pretty
# Log directory (used when target is 'file' or 'both')
OPENVOX_LOG_DIR=/var/log/openvox/webui
# Log file prefix
OPENVOX_LOG_PREFIX=openvox-webui
# Enable daily log rotation (true/false)
OPENVOX_LOG_ROTATION=true
# Maximum number of log files to keep (0 = unlimited)
OPENVOX_LOG_MAX_FILES=30

# JWT Authentication
JWT_SECRET=your-secret-key-change-in-production-minimum-32-chars
JWT_EXPIRY=24h

# PuppetDB Connection (optional)
# PUPPETDB_URL=https://puppetdb.example.com:8081
# PUPPETDB_SSL_CERT=/etc/puppetlabs/puppet/ssl/certs/webui.pem
# PUPPETDB_SSL_KEY=/etc/puppetlabs/puppet/ssl/private_keys/webui.pem
# PUPPETDB_SSL_CA=/etc/puppetlabs/puppet/ssl/certs/ca.pem

# Puppet CA Connection (optional - for certificate management)
# PUPPET_CA_URL=https://puppet.example.com:8140
# PUPPET_CA_SSL_CERT=/etc/puppetlabs/puppet/ssl/certs/webui.pem
# PUPPET_CA_SSL_KEY=/etc/puppetlabs/puppet/ssl/private_keys/webui.pem
# PUPPET_CA_SSL_CA=/etc/puppetlabs/puppet/ssl/certs/ca.pem

# Development
DEV_MODE=true

# Code Deploy Feature (Git-based Puppet environment management)
# Set to 'true' to enable the Code Deploy feature
# CODE_DEPLOY_ENABLED=true
# Encryption key for SSH private keys (must be exactly 32 bytes)
# CODE_DEPLOY_ENCRYPTION_KEY=change-this-to-32-byte-key-here!
# Base URL for webhook callbacks
# CODE_DEPLOY_WEBHOOK_BASE_URL=http://localhost:5051
# Days to retain deployment history (0 = forever)
# CODE_DEPLOY_RETAIN_HISTORY_DAYS=90
# Git repository settings
# CODE_DEPLOY_REPOS_BASE_DIR=/tmp/openvox-webui/repos
# CODE_DEPLOY_SSH_KEYS_DIR=/tmp/openvox-webui/ssh-keys
# r10k integration settings
# CODE_DEPLOY_R10K_BINARY_PATH=/opt/puppetlabs/puppet/bin/r10k
# CODE_DEPLOY_R10K_CONFIG_PATH=/etc/puppetlabs/r10k/r10k.yaml
# CODE_DEPLOY_R10K_CACHEDIR=/tmp/openvox-webui/r10k-cache
# CODE_DEPLOY_ENVIRONMENTS_BASEDIR=/tmp/openvox-webui/environments

# SAML 2.0 Single Sign-On Configuration
# Set to 'true' to enable SAML authentication
# SAML_ENABLED=true
# Service Provider (SP) configuration
# SAML_SP_ENTITY_ID=https://openvox.example.com/saml
# SAML_SP_ACS_URL=https://openvox.example.com/api/v1/auth/saml/acs
# Optional: SP certificate for signing requests
# SAML_SP_CERTIFICATE_FILE=/etc/openvox-webui/saml/sp.crt
# SAML_SP_PRIVATE_KEY_FILE=/etc/openvox-webui/saml/sp.key
# Identity Provider (IdP) configuration
# SAML_IDP_METADATA_URL=https://idp.example.com/saml/metadata
# Or use a local metadata file:
# SAML_IDP_METADATA_FILE=/etc/openvox-webui/saml/idp-metadata.xml
# Or manually configure IdP:
# SAML_IDP_ENTITY_ID=https://idp.example.com
# SAML_IDP_SSO_URL=https://idp.example.com/sso

# Server Backup Configuration
# Set to 'true' to enable automatic backups
# BACKUP_ENABLED=true
# Directory where backup files are stored
# BACKUP_DIR=/var/lib/openvox-webui/backups
# Backup frequency: hourly, daily, weekly, custom, disabled
# BACKUP_FREQUENCY=daily
# Time of day for daily/weekly backups (HH:MM format)
# BACKUP_TIME=02:00
# Custom cron expression (when BACKUP_FREQUENCY=custom)
# BACKUP_CRON=0 2 * * *
# Maximum number of backups to keep
# BACKUP_MAX_BACKUPS=30
# Enable encryption for backups (true/false)
# BACKUP_ENCRYPTION_ENABLED=true
